Threads
THREADS
4.1   Processes and Threads
      Multithreading
      Thread Functionality
4.2   Types of Threads
      User-Level and Kernel-Level Threads
      Other Arrangements
4.3   Multicore and Multithreading
      Performance of Software on Multicore
      Application Example: Valve Game Software
4.4   Windows 7 Thread and SMP Management
      Process and Thread Objects
      Multithreading
      Thread States
      Support for OS Subsystems
      Symmetric Multiprocessing Support
4.5   Solaris Thread and SMP Management
      Multithreaded Architecture
      Motivation
      Process Structure
      Thread Execution
      Interrupts as Threads
4.6   Linux Process and Thread Management
      Linux Tasks
      Linux Threads
4.7   Mac OS X Grand Central Dispatch
4.8   Summary
4.9   Recommended Reading
4.10  Key Terms, Review Questions, and Problems
                                                 157

        The basic idea is that the several components in any complex system
        will perform particular subfunctions that contribute to the overall
        function.
                                  --THE SCIENCES OF THE ARTIFICIAL, Herbert Simon
     LEARNING OBJECTIVES
     After studying this chapter, you should be able to:
          Understand the distinction between process and thread.
          Describe the basic design issues for threads.
          Explain the difference between user-level threads and kernel-level threads.
          Describe the thread management facility in Windows 7.
          Describe the thread management facility in Solaris.
          Describe the thread management facility in Linux.
     This chapter examines some more advanced concepts related to process manage-
     ment, which are found in a number of contemporary operating systems. We show
     that the concept of process is more complex and subtle than presented so far and in
     fact embodies two separate and potentially independent concepts: one relating to
     resource ownership and another relating to execution. This distinction has led to the
     development, in many operating systems, of a construct known as the thread.
4.1  PROCESSES AND THREADS
     The discussion so far has presented the concept of a process as embodying two
     characteristics:
          Resource ownership: A process includes a virtual address space to hold the
           process image; recall from Chapter 3 that the process image is the collection of
           program, data, stack, and attributes defined in the process control block. From
           time to time, a process may be allocated control or ownership of resources,
           such as main memory, I/O channels, I/O devices, and files. The OS performs a
           protection function to prevent unwanted interference between processes with
           respect to resources.
          Scheduling/execution: The execution of a process follows an execution path
           (trace) through one or more programs (e.g., Figure 1.5). This execution may
           be interleaved with that of other processes. Thus, a process has an execution
           state (Running, Ready, etc.) and a dispatching priority and is the entity that is
           scheduled and dispatched by the OS.
           Some thought should convince the reader that these two characteristics
     are independent and could be treated independently by the OS. This is done in
     a number of operating systems, particularly recently developed systems. To
