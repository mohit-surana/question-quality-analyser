I/O Devices
         An artifact can be thought of as a meeting point--an"interface"in today's
         terms between an "inner" environment, the substance and organization
         of the artifact itself, and an "outer" environment, the surroundings in
         which it operates. If the inner environment is appropriate to the outer
         environment, or vice versa, the artifact will serve its intended purpose.
                                    --THE SCIENCES OF THE ARTIFICIAL, Herbert Simon
      LEARNING OBJECTIVES
      After studying this chapter, you should be able to:
        Summarize key categories of I/O devices on computers.
        Discuss the organization of the I/O function.
        Explain some of the key issues in the design of OS support for I/O.
        Analyze the performance implications of various I/O buffering alternatives.
        Understand the performance issues involved in magnetic disk access.
        Explain the concept of RAID and describe the various levels.
        Understand the performance implications of disk cache.
        Describe the I/O mechanisms in UNIX, Linux, and Windows 7.
      Perhaps the messiest aspect of operating system design is input/output. Because
      there is such a wide variety of devices and applications of those devices, it is difficult
      to develop a general, consistent solution.
            We begin with a brief discussion of I/O devices and the organization of the I/O
      function. These topics, which generally come within the scope of computer architec-
      ture, set the stage for an examination of I/O from the point of view of the OS.
            The next section examines operating system design issues, including design
      objectives, and the way in which the I/O function can be structured. Then I/O
      buffering is examined; one of the basic I/O services provided by the operating system
      is a buffering function, which improves overall performance.
            The next sections of the chapter are devoted to magnetic disk I/O. In contemporary
      systems, this form of I/O is the most important and is key to the performance as per-
      ceived by the user. We begin by developing a model of disk I/O performance and then
      examine several techniques that can be used to enhance performance.
            Appendix J summarizes characteristics of secondary storage devices, includ-
      ing magnetic disk and optical memory. A set of animations that illustrate concepts
      in this chapter is available online. Click on the rotating globe at WilliamStallings.
      com/OS/OS7e.html for access.
11.1  I/O DEVICES
      As was mentioned in Chapter 1, external devices that engage in I/O with computer
      systems can be roughly grouped into three categories:
           Human readable: Suitable for communicating with the computer user.
            Examples include printers and terminals, the latter consisting of video display,
            keyboard, and perhaps other devices such as a mouse.

                   Machine readable: Suitable for communicating with electronic equipment.
                    Examples are disk drives, USB keys, sensors, controllers, and actuators.
                   Communication: Suitable for communicating with remote devices. Examples
                    are digital line drivers and modems.
                    There are great differences across classes and even substantial differences
     within each class. Among the key differences are the following:
                   Data rate: There may be differences of several orders of magnitude between
                    the data transfer rates. Figure 11.1 gives some examples.
                   Application: The use to which a device is put has an influence on the soft-
                    ware and policies in the OS and supporting utilities. For example, a disk used
                    for files requires the support of file management software. A disk used as a
                    backing store for pages in a virtual memory scheme depends on the use of
                    virtual memory hardware and software. Furthermore, these applications have
                    an impact on disk scheduling algorithms (discussed later in this chapter). As
                    another example, a terminal may be used by an ordinary user or a system
                    administrator. These uses imply different privilege levels and perhaps differ-
                    ent priorities in the OS.
                   Complexity of control: A printer requires a relatively simple control interface.
                    A disk is much more complex. The effect of these differences on the OS is
                    filtered to some extent by the complexity of the I/O module that controls the
                    device, as discussed in the next section.
Gigabit ethernet
Graphics display
     Hard disk
     Ethernet
     Optical disk
     Scanner
     Laser printer
     Floppy disk
     Modem
     Mouse
     Keyboard
                  101      102         103          104   105             106  107  108               109
                                                         Data Rate (bps)
Figure 11.1       Typical  I/O Device  Data  Rates

        Unit of transfer: Data may be transferred as a stream of bytes or characters
         (e.g., terminal I/O) or in larger blocks (e.g., disk I/O).
        Data representation: Different data encoding schemes are used by different
         devices, including differences in character code and parity conventions.
        Error conditions: The nature of errors, the way in which they are reported,
         their consequences, and the available range of responses differ widely from
         one device to another.
         This diversity makes a uniform and consistent approach to I/O, both from the
      point of view of the operating system and from the point of view of user processes,
      difficult to achieve.
11.2  ORGANIZATION OF THE I/O FUNCTION
      Appendix C summarizes three techniques for performing I/O:
        Programmed I/O: The processor issues an I/O command, on behalf of a process,
         to an I/O module; that process then busy waits for the operation to be completed
         before proceeding.
        Interrupt-driven I/O: The processor issues an I/O command on behalf of
         a process. There are then two possibilities. If the I/O instruction from the
         process is nonblocking, then the processor continues to execute instruc-
         tions from the process that issued the I/O command. If the I/O instruction
         is blocking, then the next instruction that the processor executes is from
         the OS, which will put the current process in a blocked state and schedule
         another process.
        Direct memory access (DMA): A DMA module controls the exchange of data
         between main memory and an I/O module. The processor sends a request for
         the transfer of a block of data to the DMA module and is interrupted only
         after the entire block has been transferred.
         Table 11.1 indicates the relationship among these three techniques. In most
      computer systems, DMA is the dominant form of transfer that must be supported
      by the operating system.
      The Evolution of the I/O Function
      As computer systems have evolved, there has been a pattern of increasing
      complexity and sophistication of individual components. Nowhere is this more
Table 11.1  I/O Techniques
                                 No Interrupts         Use of Interrupts
I/O-to-Memory Transfer through   Programmed I/O        Interrupt-driven I/O
Processor
Direct I/O-to-Memory Transfer                          Direct memory access (DMA)
