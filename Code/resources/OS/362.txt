Virtual Memory
                                           CHAPTER
VIRTUAL MEMORY
     8.1  Hardware and Control Structures
          Locality and Virtual Memory
          Paging
          Segmentation
          Combined Paging and Segmentation
          Protection and Sharing
     8.2  Operating System Software
          Fetch Policy
          Placement Policy
          Replacement Policy
          Resident Set Management
          Cleaning Policy
          Load Control
     8.3  UNIX and Solaris Memory Management
          Paging System
          Kernel Memory Allocator
     8.4  Linux Memory Management
          Linux Virtual Memory
          Kernel Memory Allocation
     8.5  Windows Memory Management
          Windows Virtual Address Map
          Windows Paging
     8.6  Summary
     8.7  Recommended Reading and Web Sites
     8.8  Key Terms, Review Questions, and Problems
340                                                  340

                           8.1 / HARDWARE AND CONTROL STRUCTURES                                              341
              You're gonna need a bigger boat.
                                                                   --Steven Spielberg, JAWS, 1975
           LEARNING OBJECTIVES
           After studying this chapter, you should be able to:
              Define virtual memory.
              Describe the hardware and control structures that support virtual memory.
              Describe the various OS mechanisms used to implement virtual memory.
              Describe the virtual memory management mechanisms in UNIX, Linux, and
               Windows 7.
           Chapter 7 introduced the concepts of paging and segmentation and analyzed their
           shortcomings. We now move to a discussion of virtual memory. An analysis of this
           topic is complicated by the fact that memory management is a complex interrela-
           tionship between processor hardware and operating system software. We focus first
           on the hardware aspect of virtual memory, looking at the use of paging, segmenta-
           tion, and combined paging and segmentation. Then we look at the issues involved in
           the design of a virtual memory facility in operating systems.
                 Table 8.1 defines some key terms related to virtual memory. A set of anima-
           tions that illustrate concepts in this chapter is available online. Click on the rotating
           globe at WilliamStallings.com/OS/OS7e.html for access.
8.1        HARDWARE AND CONTROL STRUCTURES
           Comparing simple paging and simple segmentation, on the one hand, with fixed and
           dynamic partitioning, on the other, we see the foundation for a fundamental break-
           through in memory management. Two characteristics of paging and segmentation
           are the keys to this breakthrough:
Table 8.1  Virtual Memory Terminology
Virtual memory         A storage allocation scheme in which secondary memory can be addressed as
                       though it were part of main memory. The addresses a program may use to reference
                       memory are distinguished from the addresses the memory system uses to identify
                       physical storage sites, and program-generated addresses are translated automatically
                       to the corresponding machine addresses. The size of virtual storage is limited by the
                       addressing scheme of the computer system and by the amount of secondary memory
                       available and not by the actual number of main storage locations.
Virtual address        The address assigned to a location in virtual memory to allow that location to be
                       accessed as though it were part of main memory.
Virtual address space  The virtual storage assigned to a process.
Address space          The range of memory addresses available to a process.
Real address           The address of a storage location in main memory.
